function extend(e){return e.addClass=function(t){addClass(e,t)},e.removeClass=function(t){removeClass(e,t)},e}function isValid(e){return e===!0}function validateInput(e){if(inputIsValid=!1,!e.required)return!0;switch(e.type){case"email":inputIsValid=/\w+@[A-z0-9.]+/.test(e.value);break;case"password":var t=e.value;inputIsValid=t.length>8&&/\d+/.test(t)&&/[_\-!@#$%^&* `~]/.test(t);break;default:inputIsValid=e.value.length>0}return console.log(e.nextElementSibling.textContent+" valid? "+inputIsValid),inputIsValid?e.addClass("valid"):e.removeClass("valid"),inputIsValid}function formIsValid(){this.go&&(clearTimeout(this.go),delete this.go),this.go=setTimeout(function(){formula.addClass("persp")},500)}function formIsInvalid(){setTimeout(function(){formula.removeClass("persp")},500)}addClass=function(e,t){var a=e.className.indexOf(t);return a>-1?e:(e.className=(e.className+" "+t.trim()).trimLeft(),e)},removeClass=function(e,t){var a=e.className.indexOf(t);return 0>a?e:(e.className=e.className.replace(t.trim(),"").replace("  "," "),e)};var qq=function(e){return document.querySelectorAll(e)},formula_labels=qq(".formula label"),formula_inputs=qq(".formula input"),formula=extend(qq(".formula")[0]);[].forEach.call(formula_inputs,extend),[].forEach.call(formula_inputs,function(e){console.log(e.value),e.value.length>0&&e.addClass("focus"),e.onchange=e.onblur=function(){0===e.value.length?e.removeClass("focus"):e.addClass("focus")},e.onkeyup=function(){[].map.call(formula_inputs,validateInput).every(isValid)?formIsValid():formIsInvalid()}}),[].map.call(formula_inputs,validateInput).every(isValid)&&formIsValid(),[].forEach.call(formula_labels,function(e){e.onclick=function(){e.previousElementSibling.addClass("focus"),e.previousElementSibling.focus()}});var inputIsValid,inputGroupElements=qq(".input-group input~*"),nearestInput=inputGroupElements[0].previousElementSibling,padLeft,padRight,basePad=15;[].forEach.call(inputGroupElements,function(e){console.log(nearestInput),"LABEL"===e.nodeName&&(console.log("STOP"),nearestInput.style.paddingLeft=padLeft+"px",nearestInput.style.paddingRight=padRight+"px",nearestInput.style.width=nearestInput.offsetWidth-(padLeft+padRight)+"px",nearestInput=e.previousElementSibling,padLeft=padRight=basePad),/pill-left|glance/g.test(e.classList)&&(padLeft+=e.offsetWidth),/pill-right/g.test(e.classList)&&(padRight+=e.offsetWidth)});var submitBtn=qq(".submit-btn")[0];submitBtn.onclick=function(){formula.removeClass("persp"),setTimeout(function(){formula.addClass("punched")},450)};